(function(r,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("@paralleldrive/cuid2"),require("cuid")):typeof define=="function"&&define.amd?define(["exports","@paralleldrive/cuid2","cuid"],g):(r=typeof globalThis<"u"?globalThis:r||self,g(r["zod-fixture"]={},r.cuid2,r.cuid))})(this,function(r,g,A){"use strict";const _=()=>({condition:({type:n})=>n==="array",generator:({length:n=3,create:e})=>{if(n<0)throw new Error(`length ${n} must be greater or equal to 0`);return Array.from({length:n},()=>e())}}),x=(n=1,e=500)=>{if(n>e)throw new Error(`min ${n} can't be greater max ${e}`);return{condition:({type:o,checks:t={}})=>o==="bigint"&&t.min===void 0&&t.max===void 0,generator:()=>z(n,e)}},B=()=>({condition:({type:n,checks:e={}})=>n==="bigint"&&(e.min!==void 0||e.max!==void 0),generator:({checks:n={}})=>{const e=n.min,o=n.max;if(e>o)throw new Error(`min ${e} can't be greater max ${o}`);const t=o??e+500,u=e??t-500;return z(u,t)}});function z(n,e){return BigInt(Math.floor(Math.random()*(e-n+1)+n))}const $=()=>{let n=!1;return{condition:({type:e})=>e==="boolean",generator:()=>(n=!n,n)}},Y=1,v=500,T=(n=Y,e=v)=>{if(n>e)throw new Error(`min ${n} can't be greater max ${e}`);return{condition:({type:o,checks:t={}})=>o==="number"&&t.min===void 0&&t.max===void 0,generator:()=>c(n,e)}},Z=()=>({condition:({type:n,checks:e={}})=>n==="number"&&(e.min!==void 0||e.max!==void 0),generator:({checks:n={}})=>{const e=n.min,o=n.max;if(e>o)throw new Error(`min ${e} can't be greater max ${o}`);const t=o??e+v,u=e??t-v;return c(u,t)}});function c(n,e){return Math.floor(Math.random()*(e-n+1)+n)}const p=new Date,G=new Date(p.getUTCFullYear()-2,p.getUTCMonth(),p.getUTCDate()).getTime(),H=new Date(p.getUTCFullYear()+2,p.getUTCMonth(),p.getUTCDate()).getTime(),h=31536e6*2,M=(n=G,e=H)=>{if(n>e)throw new Error(`min ${n} can't be greater max ${e}`);return{condition:({type:o,checks:t={}})=>o==="date"&&t.min===void 0&&t.max===void 0,generator:()=>new Date(c(n,e))}},R=()=>({condition:({type:n,checks:e={}})=>n==="date"&&(e.min!==void 0||e.max!==void 0),generator:({checks:n={}})=>{const e=n.min,o=n.max;if(e>o)throw new Error(`min ${e} can't be greater max ${o}`);const t=o??e+h,u=e??t-h;return new Date(c(u,t))}}),E=()=>({condition:({type:n})=>n==="object",generator:J});function J({shape:n}){return Object.entries(n).reduce((e,[o,t])=>({...e,[o]:t.create()}),{})}const K=["null","any","unknown","never"],S=()=>({condition:({type:n})=>K.includes(n),generator:()=>null}),N=()=>({condition:({type:n})=>n==="string",generator:({propertName:n,checks:e={}})=>e.uuid?b():e.cuid?A():e.cuid2?g.createId():e.email?`${y(n).slice(0,8)}@fixture.com`:e.startsWith||e.endsWith?[e.startsWith,y(n),e.endsWith].filter(Boolean).join(""):e.min!==void 0||e.max!==void 0?Q(n,e.min,e.max):y(n)});function Q(n,e,o){if(e!==void 0&&e<0)throw new Error(`minLength ${e} can't be less than 0`);let t=y(n);for(;t.length<(e??t.length);)t+=`-${b()}`;return t.length>(o??t.length)&&(t=t.substring(0,o)),t}function y(n){return`${n?`${n}-`:""}${b()}`}function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const j=()=>({condition:({type:n})=>n==="undefined",generator:()=>{}}),X=()=>{},L=()=>({condition:({type:n})=>n==="function"||n==="void",generator:()=>X}),O=()=>({condition:({type:n})=>n==="enum",generator:({possibleValues:n})=>n[Math.floor(Math.random()*n.length)]}),U=()=>({condition:({type:n})=>n==="literal",generator:({value:n})=>n}),q=()=>({condition:({type:n})=>n==="NaN",generator:()=>NaN}),D=()=>({condition:({type:n})=>n==="map",generator:({length:n=3,keyCreate:e,valueCreate:o})=>{if(n<0)throw new Error(`length ${n} must be greater or equal to 0`);const t=new Map;for(;t.size<n;)t.set(e(),o());return t}}),W=()=>({condition:({type:n})=>n==="set",generator:({length:n=3,create:e})=>{if(n<0)throw new Error(`length ${n} must be greater or equal to 0`);const o=new Set;for(;o.size<n;)o.add(e());return o}}),F=()=>({condition:({type:n})=>n==="tuple",generator:({create:n})=>n()}),I=()=>({condition:({type:n})=>n==="record",generator:({length:n=3,keyCreate:e,valueCreate:o})=>{if(n<0)throw new Error(`length ${n} must be greater or equal to 0`);return Array.from({length:n}).reduce(t=>({...t,[e()]:o()}),{})}}),V=()=>({condition:({type:n})=>n==="union",generator:({create:n,possibleTypes:e})=>{const o=e[Math.floor(Math.random()*e.length)];return n(o)}}),P=()=>({condition:({type:n})=>n==="effect",generator:k});function k({effect:n,inner:e}){return n.type==="transform"?n.transform(e.create(),{addIssue:()=>{},path:e.path}):e.create()}function l(n,e){const t=m(n).createValue(e),u=e.customizations.find(C=>C.condition(t));return u?u.generator(t):null}function m(n){if(n._def.innerType)return m(n._def.innerType);const e=(i,a)=>[i,d=>{const s=d.ignoreChecks?{}:nn(n),f=(a==null?void 0:a(d))??{};return{propertName:d.path[0],type:i,checks:s,...f}}],t={ZodString:()=>e("string"),ZodNumber:()=>e("number"),ZodBigInt:()=>e("bigint"),ZodBoolean:()=>e("boolean"),ZodObject:()=>e("object",i=>({shape:Object.entries(n._def.shape()).reduce((d,[s,f])=>{const w=m(f);return{...d,[s]:{type:w.type,create:()=>l(f,{...i,path:[s,...i.path]})}}},{})})),ZodDate:()=>e("date"),ZodArray:()=>e("array",i=>{const{minLength:a,maxLength:d}=n._def;let s=i.defaultLength;if(a!==null&&d!==null){if(a.value>d.value)throw new Error(`min ${a} can't be greater max ${d}`);s=c(a.value,d.value)}else a!==null?s=a.value:d!==null&&(s=d.value);return{length:s,create:()=>l(n._def.type,i)}}),ZodSet:()=>e("set",i=>({length:i.defaultLength,create:()=>l(n._def.valueType,i)})),ZodMap:()=>e("map",i=>{const a=m(n._def.keyType),d=m(n._def.valueType);return{length:i.defaultLength,keyType:a.type,keyCreate:()=>l(n._def.keyType,i),valueType:d.type,valueCreate:()=>l(n._def.valueType,i)}}),ZodRecord:()=>e("record",i=>{const a=m(n._def.keyType),d=m(n._def.valueType);return{length:i.defaultLength,keyType:a.type,keyCreate:()=>l(n._def.keyType,i),valueType:d.type,valueCreate:()=>l(n._def.valueType,i)}}),ZodTuple:()=>e("tuple",i=>({items:()=>n._def.items.map(a=>m(a).type),create:()=>n._def.items.map(a=>l(a,i))})),ZodEnum:()=>e("enum",()=>({possibleValues:n._def.values??[]})),ZodNativeEnum:()=>e("enum",()=>{const i=n._def.values;return{possibleValues:Object.keys(i??{}).filter(a=>Number.isNaN(Number(a))).map(a=>i[a])}}),ZodUnion:()=>e("union",i=>({possibleTypes:n._def.options.map(a=>m(a).type),create:a=>{const d=n._def.options.find(s=>m(s).type===a);if(!d)throw new Error(`Option with type ${a} does not exist`);return l(d,i)}})),ZodDiscriminatedUnion:()=>e("union",i=>{const d=[...n._def.options.values()];return{possibleTypes:d.map(s=>m(s).type),create:s=>{const f=d.find(w=>m(w).type===s);if(!f)throw new Error(`Option with type ${s} does not exist`);return l(f,i)}}}),ZodLiteral:()=>e("literal",()=>({value:n._def.value})),ZodNaN:()=>e("NaN"),ZodNull:()=>e("null"),ZodUndefined:()=>e("undefined"),ZodVoid:()=>e("void"),ZodFunction:()=>e("function"),ZodAny:()=>e("any"),ZodUnknown:()=>e("unknown"),ZodNever:()=>e("never"),ZodEffects:()=>e("effect",i=>{const a=m(n._def.schema).type;return{effect:n._def.effect,inner:{path:i.path,type:a,create:()=>l(n._def.schema,i)}}})}[n._def.typeName];if(!t)throw new Error(`Missing type for ZodType "${n._def.typeName}"`);const[u,C]=t();return{type:u,createValue:C}}function nn(n){const e=[...n._def.checks||[]];n._def.minLength&&e.push({kind:"min",value:n._def.minLength.value}),n._def.maxLength&&e.push({kind:"max",value:n._def.maxLength.value});const o=e.reduce((t,u)=>{switch(u.kind){case"min":return{...t,[u.kind]:u.value+(u.inclusive===!1?1:0)};case"max":return{...t,[u.kind]:u.value+(u.inclusive===!1?-1:0)};case"length":return{...t,min:u.value,max:u.value};case"uuid":case"cuid":case"cuid2":case"email":return{...t,[u.kind]:!0};case"startsWith":case"endsWith":return{...t,[u.kind]:u.value};default:return t}},{});if(o.min!==void 0&&o.max!==void 0&&o.min>o.max)throw new Error(`min (${o.min}) can't be greater than max (${o.max})`);return o}const en=[N(),x(),T(),Z(),$(),M(),R(),S(),j(),L(),q(),O(),U(),_(),E(),I(),D(),W(),F(),V(),P()];function tn(n,{ignoreChecks:e=!1,customizations:o=[],defaultLength:t=3}={}){return l(n,{path:[],ignoreChecks:e,defaultLength:t,customizations:[...o,...en]})}r.arrayWithLengthCustomization=_,r.bigIntRandomizeCustomization=x,r.bigIntRandomizer=z,r.bigintRandomizeZodSchemaCustomization=B,r.booleanSequenceCustomization=$,r.createFixture=tn,r.dateRandomizeCustomization=M,r.dateRandomizeZodSchemaCustomization=R,r.literalValueCustomization=U,r.mapCustomization=D,r.nanCustomization=q,r.noopCustomization=L,r.nullCustomization=S,r.numberRandomizeCustomization=T,r.numberRandomizeZodSchemaCustomization=Z,r.numberRandomizer=c,r.objectCustomization=E,r.randomValueOfPossiblesCustomication=O,r.recordCustomization=I,r.setCustomization=W,r.stringCustomization=N,r.tupleCustomization=F,r.undefinedCustomization=j,r.unionRandomizeCustomization=V,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
